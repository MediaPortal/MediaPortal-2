<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary
    xmlns="www.team-mediaportal.com/2008/mpf/directx"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:collections="clr-namespace:MediaPortal.UI.Presentation.DataObjects;assembly=MediaPortal.UI"
    xmlns:navitems="clr-namespace:MediaPortal.UiComponents.Media.Models.Navigation;assembly=Media"
    xmlns:mp_special_controls="clr-namespace:MediaPortal.UI.SkinEngine.SpecialElements.Controls;assembly=SkinEngine"
    xmlns:fanart="clr-namespace:MediaPortal.Extensions.UserServices.FanArtService.Client;assembly=FanArtService.Client"
    DependsOnStyleResources="Consts,Colors,Buttons,OtherControls"
    >

  <Style x:Key="PartyMusicPlayerControllerStyle" TargetType="{x:Type mp_special_controls:PlayerControl}">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type mp_special_controls:PlayerControl}">
          <ControlTemplate.Resources>
            <Model x:Key="AudioPlayerModel" Id="D8998340-DA2D-42be-A29B-6D7A72AEA2DC"/>

          </ControlTemplate.Resources>

          <Control Style="{ThemeResource OSDAudioContainer}" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                   Margin="10,0,10,10" HorizontalAlignment="Stretch">
            <Control.Resources>
              <ControlTemplate x:Key="OSD_InfoArea_Template">

                <Grid x:Name="PlayerGrid" Margin="5,0,5,0"
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                  </Grid.RowDefinitions>
                </Grid>
              </ControlTemplate>

              <ControlTemplate x:Key="OSD_Progress_Template">
                <DockPanel LastChildFill="true" Margin="0,10,0,10" HorizontalAlignment="Stretch">
                  <ProgressBar x:Name="ProgressBar" Height="18" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                               Value="{Binding Path=PercentPlayed, Mode=TwoWay}" Style="{ThemeResource OSDProgressBarStyle}"/>
                </DockPanel>
              </ControlTemplate>

              <ControlTemplate x:Key="OSD_Controls_Template">
                <Grid HorizontalAlignment="Stretch">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <StackPanel x:Name="PlayControlsPanel" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Button x:Name="PlayingInfoButton" Style="{ThemeResource PlayerInfoButtonStyle}" Margin="{ThemeResource PlayerControlButtonMargins}"
                            Command="{Command Source={Service WorkflowManager},Path=NavigatePush,Parameters=4596B758-CE2B-4e31-9CB9-6C30215831ED}"/>
                    <Button x:Name="StopButton" Style="{ThemeResource StopButtonStyle}" Margin="0" IsVisible="{Binding CanStop}"
                            Command="{Command Stop}"/>
                    <Button x:Name="SkipBackButton" Style="{ThemeResource SkipBackButtonStyle}" Margin="0" IsVisible="{Binding CanSkipBack}"
                            Command="{Command Previous}"/>
                    <Button x:Name="RewindButton" Style="{ThemeResource RewindButtonStyle}" Margin="0" IsVisible="{Binding CanSeekBackward}"
                            Command="{Command SeekBackward}"/>
                    <Button x:Name="PlayPauseButton" Margin="{ThemeResource PlayerControlButtonMargins}" Style="{ThemeResource PlayPauseButtonStyle}" 
                            Command="{Command Play}">
                      <Button.IsVisible>
                        <MultiBinding Converter="{StaticResource ExpressionMultiValueConverter}" ConverterParameter="{}{0} || {1}">
                          <Binding Path="CanPlay"/>
                          <Binding Path="CanPause"/>
                        </MultiBinding>
                      </Button.IsVisible>
                      <Button.Triggers>
                        <DataTrigger Binding="{Binding CanPause}" Value="True">
                          <Setter Property="Command" Value="{Command Pause}"/>
                        </DataTrigger>
                      </Button.Triggers>
                    </Button>
                    <Button x:Name="ForwardButton" Style="{ThemeResource ForwardButtonStyle}" Margin="0" IsVisible="{Binding CanSeekForward}"
                            Command="{Command SeekForward}"/>
                    <Button x:Name="SkipForwardButton" Style="{ThemeResource SkipForwardButtonStyle}" Margin="0" IsVisible="{Binding CanSkipForward}"
                            Command="{Command Next}"/>
                    <Button x:Name="AudioActive" Style="{ThemeResource AudioActiveButtonStyle}" Margin="0"
                            IsVisible="{Binding IsAudio}" Command="{Command AudioButtonPressed}"/>
                    <Button x:Name="AudioInactive" Style="{ThemeResource AudioInactiveButtonStyle}" Margin="0"
                            IsVisible="{Binding !IsAudio}" Command="{Command AudioButtonPressed}"/>
                    <StackPanel Orientation="Vertical" Margin="0,3,1,-3">
                      <Button x:Name="VolumeUpButton" Style="{ThemeResource VolumeUpButtonStyle}"  
                              Command="{Command Source={StaticResource GeneralPlayerModel},Path=VolumeUp}"/>
                      <Button x:Name="VolumeDownButton" Style="{ThemeResource VolumeDownButtonStyle}"
                              Command="{Command Source={StaticResource GeneralPlayerModel},Path=VolumeDown}"/>
                    </StackPanel>
                  </StackPanel>
                </Grid>
              </ControlTemplate>

            </Control.Resources>
          </Control>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Setter Property="PlayerContext" Value="PrimaryPlayer"/>
  </Style>
</ResourceDictionary>
