<Project>

  <Target Name="CopyToOutput" AfterTargets="Build">
    <PropertyGroup>
      <ExeDestination>$(SolutionDir)..\Bin\$(SolutionName)\bin\$(ConfigurationName)\net5.0-windows\</ExeDestination>
    </PropertyGroup>

    <ItemGroup>
      <References Include="$(ProjectDir)MP2 Client Splashscreen.jpg" />
    </ItemGroup>

    <ItemGroup>
      <BaseFiles Include="$(SolutionDir)Base\Client\**\*.*" />
    </ItemGroup>

    <ItemGroup>
      <TargetFiles Include="$(TargetDir)*.dll" />
      <TargetFiles Include="$(TargetDir)*.exe" />
      <TargetFiles Include="$(TargetDir)*.exe.config" />
    </ItemGroup>

    <ItemGroup Condition=" '$(Configuration)' == 'Debug'">
      <PluginFiles Include="$(TargetDir)*.pdb" />
      <PluginFiles Include="$(TargetDir)*.xml" />
    </ItemGroup>

    <Copy SourceFiles="@(References)" DestinationFolder="$(ExeDestination)" />
    <Copy SourceFiles="@(TargetFiles)" DestinationFolder="$(ExeDestination)" />
    <Copy SourceFiles="@(BaseFiles)" DestinationFiles="@(BaseFiles->'$(ExeDestination)%(RecursiveDir)%(Filename)%(Extension)')" />

  </Target>
</Project>
